{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <title>TEST</title>
  </head>

  <body>
    <div class="container p-3 my-3 border">
        
        <button onclick="loginMail('weasplaya@gmail.com', '123456')">LOGIN</button>
        <button onclick="logout()">LOGOUT</button>
        
    </div>    

  <script src="https://www.gstatic.com/firebasejs/9.7.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.7.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.7.0/firebase-auth-compat.js"></script>
  <script>

    // Configuración credenciales acceso
    const firebaseApp = firebase.initializeApp({ 
      apiKey: "AIzaSyAXP_MEtzVz6-mEyfjXt0Z-OIEOcSXqDYs",
      authDomain: "automed-cl.firebaseapp.com",
      projectId: "automed-cl",
      storageBucket: "automed-cl.appspot.com",
      messagingSenderId: "509880148775",
      appId: "1:509880148775:web:4e2309ac39885f7829ff02",
      measurementId: "G-GYY8CEF4NW"
     });
    const db = firebaseApp.firestore();
    const auth = firebaseApp.auth();

    function loginMail(email, password){
      firebase.auth().signInWithEmailAndPassword(email, password)
      .then((userCredential) => {
        // Signed in
        var user = userCredential.user;
        console.log('¡SESIÓN INICIADA!');
        console.log(user);
        // Redireccionamiento a la nueva vista
        // ...
      })
      .catch((error) => {
        var errorCode = error.code;
        var errorMessage = error.message;
        console.log('ERROR: código: ', errorCode);
        console.log('ERROR: mensaje: ', errorMessage);
        });
    }

    function logout(){
        firebase.auth().signOut().then(() => {
            // Sign-out successful.
            console.log('Sesión terminada.');
          }).catch((error) => {
              // An error ocurred.
                var errorCode = error.code;
                var errorMessage = error.message;
                console.log('ERROR: código: ', errorCode);
                console.log('ERROR: mensaje: ', errorMessage);
          });
    }
  </script>
  </body>
</html>